<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<html>
<head>
<title>Availability</title>
<meta name="description" content="Availability">
<meta name="keywords" content="article">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">

<meta name="Generator" content="LaTeX2HTML v2002-2-1">
<meta http-equiv="Content-Style-Type" content="text/css">

<link rel="STYLESHEET" href="article.css">

<link rel="next" href="node12.html">
<link rel="previous" href="node10.html">
<link rel="up" href="article.html">
<link rel="next" href="node12.html">
</head>

<body >
<!--Navigation Panel-->
<a name="tex2html164"
  href="node12.html">
<img width="37" height="24" align="BOTTOM" border="0" alt="next" src="next.png"></a> 
<a name="tex2html162"
  href="article.html">
<img width="26" height="24" align="BOTTOM" border="0" alt="up" src="up.png"></a> 
<a name="tex2html156"
  href="node10.html">
<img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="prev.png"></a>   
<br>
<b> Next:</b> <a name="tex2html165"
  href="node12.html">Bibliography</a>
<b> Up:</b> <a name="tex2html163"
  href="article.html">PCI Interrupts for x86</a>
<b> Previous:</b> <a name="tex2html157"
  href="node10.html">Acknowledgments</a>
<br>
<br>
<!--End of Navigation Panel-->

<h1><a name="SECTION000110000000000000000">
Availability</a>
</h1>

<p>
All of the code for managing PCI interrupts is available in the
FreeBSD source tree&nbsp;[<A
 HREF="node12.html#fbsd">3</a>].  The code is split into roughly two
parts.  First, the code to manage interrupt routing and MSI is
contained in the kernel.  Second, the code for various utilities to
dump interrupt routing tables is contained in userland sources.  All
of the interrupt routing code and related utilities can be found in
FreeBSD 5.2 and later.  The MSI code as well as the update to
<tt>pciconf</tt> to display PCI capabilities was added to FreeBSD
after FreeBSD 6.2 and will be present in both FreeBSD 6.3 and FreeBSD
7.0.

<p>
The PCI-PCI bridge driver is found in
<tt>src/sys/dev/pci/pci_pci.c</tt>.  Among other things, this driver
contains the code to use the PCI-PCI bridge swizzle to route
interrupts across PCI-PCI bridges in add-in cards.

<p>
The $PIR interrupt routing code is found in
<tt>src/sys/i386/include/pc/bios.h</tt> and
<tt>src/sys/i386/pci/pci_pir.c</tt>.  The source for the
<tt>pirtool</tt> utility is found in the
<tt>src/tools/tools/pirtool</tt> directory.

<p>
The MP Table interrupt routing code is present for both amd64 and
i386.  For amd64 it is found in
<tt>src/sys/amd64/include/mptable.h</tt>,
<tt>src/sys/amd64/amd64/mptable.c</tt>, and
<tt>src/sys/amd64/amd64/mptable_pci.c</tt>.  The i386 code is found in
the same files but under <tt>src/sys/i386</tt>.  The source for the
<tt>mptable(8)</tt> utility is found in the <tt>src/usr.sbin/mptable</tt>
directory.

<p>
The ACPI interrupt routing code is all found in the
<tt>src/sys/dev/acpica</tt> directory.  The <tt>acpi_pci_link.c</tt>
file contains the device driver for PCI interrupt link devices.  The
<tt>acpi_pcib.c</tt> file contains the code to parse <tt>_PRT</tt>
tables.  It will call the PCI interrupt link code when a PCI interrupt
is attached to a link device.  The source for the <tt>acpidump</tt>
utility is found in the <tt>src/usr.sbin/acpi/acpidump</tt> utility.

<p>
The machine independent code for MSI support is found in
<tt>src/sys/dev/pci/pci.c</tt> and <tt>src/sys/dev/pci/pci_pci.c</tt>.
The MSI support for amd64 and i386 is found in
<tt>src/sys/amd64/amd64/msi.c</tt> and
<tt>src/sys/i386/i386/msi.c</tt>, respectively.  The source for the
<tt>pciconf</tt> utility is found in the <tt>src/usr.sbin/pciconf</tt>
directory, with the code to parse PCI capabilities in <tt>cap.c</tt>.

<p>
<hr>
<!--Navigation Panel-->
<a name="tex2html164"
  href="node12.html">
<img width="37" height="24" align="BOTTOM" border="0" alt="next" src="next.png"></a> 
<a name="tex2html162"
  href="article.html">
<img width="26" height="24" align="BOTTOM" border="0" alt="up" src="up.png"></a> 
<a name="tex2html156"
  href="node10.html">
<img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="prev.png"></a>   
<br>
<b> Next:</b> <a name="tex2html165"
  href="node12.html">Bibliography</a>
<b> Up:</b> <a name="tex2html163"
  href="article.html">PCI Interrupts for x86</a>
<b> Previous:</b> <a name="tex2html157"
  href="node10.html">Acknowledgments</a>
<!--End of Navigation Panel-->

</body>
</html>
